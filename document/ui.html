<!doctype html>
<html>
<head>
	<title>miniExtend CustomUI</title>
	<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
	<link rel="stylesheet" type="text/css" href="css/css.css" />
	<script src = "./js/js.js"></script>
</head>
<body>
	<div class="container main">
	<div class="row">
		<script>writeLeftColumn("miniExtend CustomUI")</script>
		<div class="col middle-column">
		<div class="article">
			<script>writePreviousNextLinks("prev", "event.html", "miniExtend Event")</script>
			<div class="article-body">
			<div class="article-intro" id="content">
				<h1>miniExtend <span class="color_h1">CustomUI</span></h1>
				<p>
					大多数 CustomUI 函数都包含 playerid 参数，这些函数都支持使用 objid 作为 playerid 参数。<br />
					除非有声明返回值，所有调用 API 的 CustomUI 函数返回 true 表示调用成功，否则返回 false 表示出错。
				</p>
				<hr />
				<h2>CustomUI:newUIView() 函数</h2>
				<p>
					使用 CustomUI:newUIView(uiname : string) 创建或获取一个 id 为 uiname 的 UIView 对象，它代表了一个 UI 界面。
				</p>
				<hr />
				<h2>UIView 类</h2>
				<p>
					UIView 类位于 CustomUI 作用域内，它包含以下属性：
				</p>
				<table class="reference"><tbody>
					<tr>
						<th style="width:20%">属性</th>
						<th>描述</th>
					</tr>

					<tr>
						<td>name : string</td>
						<td>调用 CustomUI:newUIView() 函数时传递的 uiname 参数，可读。</td>
					</tr>
					<tr>
						<td>elements : table</td>
						<td>包含界面下注册的所有元件。</td>
					</tr>
					<tr>
						<td>images : table</td>
						<td>包含界面下注册的所有图像。</td>
					</tr>
					<tr>
						<td>buttons : table</td>
						<td>包含界面下注册的所有按钮。</td>
					</tr>
					<tr>
						<td>texts : table</td>
						<td>包含界面下注册的所有文本。</td>
					</tr>
					<tr>
						<td>inputBoxes : table</td>
						<td>包含界面下注册的所有输入框。</td>
					</tr>
				</tbody></table>
				<p>
					UIView 类包含以下方法：
				</p>
				<table class="reference notranslate"><tbody>
					<tr>
						<th width="35%" align="left">方法</th>
						<th align="left">描述</th>
					</tr>

					<tr>
						<td>open([playerid : number])</td>
						<td>使 uin 为 playerid （或者 objid ） 的玩家打开该 UI 界面，下文不再解释 playerid 含义。</td>
					</tr>
					<tr>
						<td>hide([playerid])</td>
						<td>隐藏该 UI 界面。</td>
					</tr>
					<tr>
						<td>setState(state : string [, playerid])</td>
						<td>设置该 UI 界面所有注册过元件的状态为 state 。</td>
					</tr>
					<tr>
						<td>newElement(elementid : string)</td>
						<td>在该 UI 界面注册并返回一个 id 为 elementid 的 Element 对象（元件），元件必须位于该 UI 界面内否则无效，尽量注册为元件本身所属的元件类型。</td>
					</tr>
					<tr>
						<td>newImage(elementid : string)</td>
						<td>在该 UI 界面注册并返回一个 id 为 elementid 的 Image 对象（图片），图片必须位于该 UI 界面内否则无效。</td>
					</tr>
					<tr>
						<td>newButton(elementid : string)</td>
						<td>在该 UI 界面注册并返回一个 id 为 elementid 的 Button 对象（按钮），按钮必须位于该 UI 界面内否则无效。</td>
					</tr>
					<tr>
						<td>newText(elementid : string)</td>
						<td>在该 UI 界面注册并返回一个 id 为 elementid 的 Text 对象（文本），文本必须位于该 UI 界面内否则无效。</td>
					</tr>
					<tr>
						<td>newInputBox(elementid : string)</td>
						<td>在该 UI 界面注册并返回一个 id 为 elementid 的 InputBox 对象（输入框），输入框必须位于该 UI 界面内否则无效。</td>
					</tr>
				</tbody></table>
				<hr />
				<h2>Element 类</h2>
				<p>
					Element 类位于 CustomUI 作用域内，它包含以下属性：
				</p>
				<table class="reference"><tbody>
					<tr>
						<th style="width:20%">属性</th>
						<th>描述</th>
					</tr>

					<tr>
						<td>uiView : table</td>
						<td>所属 UIView 对象，可读。</td>
					</tr>
					<tr>
						<td>id : string</td>
						<td>元件的 id ，在注册元件时传递的参数，可读。</td>
					</tr>
				</tbody></table>
				<p>
					Element 类包含以下方法：
				</p>
				<table class="reference notranslate"><tbody>
					<tr>
						<th width="35%" align="left">方法</th>
						<th align="left">描述</th>
					</tr>

					<tr>
						<td>show([playerid])</td>
						<td>显示元件。</td>
					</tr>
					<tr>
						<td>hide([playerid])</td>
						<td>隐藏元件。</td>
					</tr>
					<tr>
						<td>setState(state : string [, playerid])</td>
						<td>设置元件状态为 state 。</td>
					</tr>
					<tr>
						<td>setDisplay(display : boolean [, playerid])</td>
						<td>如果 display 为 true，显示元件，否则隐藏元件。</td>
					</tr>
					<tr>
						<td>setPosition(x : number, y : number [, playerid])</td>
						<td>设置元件的位置为 (x, y) ， x 也可以是一个包含键 x, y 的表。</td>
					</tr>
					<tr>
						<td>setSize(width : number, height : number [, playerid])</td>
						<td>设置元件的宽度为 width ，高度为 height ， width 也可以是一个包含键 width, height 的表。</td>
					</tr>
					<tr>
						<td>setColor(color : number [, playerid])</td>
						<td>设置元件的颜色为 color ， color 为 rgb 数值，例如 0xff0000 。</td>
					</tr>
					<tr>
						<td>ssetAlpha(alpha : number [, playerid])</td>
						<td>设置元件的透明度为 alpha ，0为完全透明，100为完全透明。</td>
					</tr>
					<tr>
						<td>setAngle(angle : number [, playerid])</td>
						<td>旋转元件至 angle ，旋转是顺时针的， angle 是0~359之间的整数。</td>
					</tr>
				</tbody></table>
				<hr />
				<h2>Image 类</h2>
				<p>
					Image 类位于 CustomUI 作用域内，继承自 Element ，所有 Element 对象支持的属性和方法 Image 对象都可正常调用。<br />
					Image 类包含以下方法：
				</p>
				<table class="reference notranslate"><tbody>
					<tr>
						<th width="35%" align="left">方法</th>
						<th align="left">描述</th>
					</tr>

					<tr>
						<td>setTexture(url : string [, playerid])</td>
						<td>设置图片的纹理为 url 。</td>
					</tr>
				</tbody></table>
				<hr />
				<h2>Button 类</h2>
				<p>
					Button 类位于 CustomUI 作用域内，继承自 Image 。<br />
					Button 类包含以下属性：
				</p>
				<table class="reference"><tbody>
					<tr>
						<th style="width:20%">属性</th>
						<th>描述</th>
					</tr>

					<tr>
						<td>pressCallBack : function</td>
						<td>按钮被按时调用的函数，可读写，详见下文。</td>
					</tr>
					<tr>
						<td>clickCallBack : function</td>
						<td>按钮被点击时调用的函数，可读写，详见下文。</td>
					</tr>
				</tbody></table>
				<hr />
				<h2>Text 类</h2>
				<p>
					Text 类位于 CustomUI 作用域内，继承自 Element。<br />
					Text 类包含以下方法：
				</p>
				<table class="reference notranslate"><tbody>
					<tr>
						<th width="35%" align="left">方法</th>
						<th align="left">描述</th>
					</tr>

					<tr>
						<td>setFontSize(size : number [, playerid])</td>
						<td>设置文本元件的字体大小为 size 。</td>
					</tr>
					<tr>
						<td>setText(text : string [, playerid])</td>
						<td>设置文本元件的显示的文本为 text 。</td>
					</tr>
				</tbody></table>
				<hr />
				<h2>InputBox 对象</h2>
				<p>
					InputBox 类位于 CustomUI 作用域内，继承自 Text。<br />
					InputBox 对象包含以下属性：
				</p>
				<table class="reference"><tbody>
					<tr>
						<th style="width:20%">属性</th>
						<th>描述</th>
					</tr>

					<tr>
						<td>inputCallBack : function</td>
						<td>输入框失去焦点，即输入完毕时调用的函数，可读写，详见下文。</td>
					</tr>
				</tbody></table>
				<hr />
				<h2>UI 回调事件</h2>
					<p>
						Button 对象的 pressCallBack, clickCallBack ，InputBox 对象的 inputCallBack 属性会在相关事件发生时被调用，传递一个哈希表作为参数<br />
						参数额外包含 element ，表示事件中的元件，其它参数和 Event:connect() 中的一样。<br />
						你可以通过设置这些属性来在相应事件发生时调用函数。
					</p>
				<hr />
				<h2>CustomUI 实例</h2>
				<p>该实例主要展示 objid 的用途，注意不能直接复制使用，需更改 id 实参。</p>
				<div class="example"> 
					<h2 class="example">实例(miniExtend)</h2> 
					<div class="example_code">
						<span style="color: Green; font-weight: bold;">local</span> uiView <span style="color: #Gray;">=</span> CustomUI<span style="color: #Gray;">:</span>newUIView<span style="color: Olive;">(</span><span style="color: #a11;">[[7134104777896252342]]</span><span style="color: Olive;">)</span><br />
						<span style="color: Green; font-weight: bold;">local</span> button <span style="color: #Gray;">=</span> uiView<span style="color: #Gray;">:</span>newButton<span style="color: Olive;">(</span><span style="color: #a11;">[[7134104777896252342_1]]</span><span style="color: Olive;">)</span><br />
						<span style="color: Green; font-weight: bold;">local</span> inputBox <span style="color: #Gray;">=</span> uiView<span style="color: #Gray;">:</span>newInputBox<span style="color: Olive;">(</span><span style="color: #a11;">[[7134104777896252342_2]]</span><span style="color: Olive;">)</span><br />
						button<span style="color: #Gray;">.</span>clickCallBack <span style="color: #Gray;">=</span> <span style="color: Green; font-weight: bold;">function</span><span style="color: Olive;">(</span>paprm<span style="color: Olive;">)</span> <span style="color: #a50; font-style: italic;">-- 当该函数被调用时， objid 等于 paprm.eventobjid</span><br />
						&nbsp;&nbsp;<span style="color: #a50; font-style: italic;">-- 此时 getObjectId() 的返回值等于 paprm.eventobjid</span><br />
						&nbsp;&nbsp;inputBox<span style="color: #Gray;">:</span>setText<span style="color: Olive;">(</span><span style="color: #a11;">""</span><span style="color: Olive;">) </span><span style="color: #a50; font-style: italic;">-- 等价于 inputBox:setText("", paprm.eventobjid)</span><br />
						<span style="color: Green; font-weight: bold;">end</span><br />
						inputBox<span style="color: #Gray;">.</span>inputCallBack <span style="color: #Gray;">=</span> <span style="color: Green; font-weight: bold;">function</span><span style="color: Olive;">(</span>paprm<span style="color: Olive;">)</span><br />
						&nbsp;&nbsp;button<span style="color: #Gray;">:</span>setDisplay<span style="color: Olive;">(</span>paprm<span style="color: #Gray;">.</span>content <span style="color: #Gray;">~=</span> <span style="color: #a11;">"hide"</span><span style="color: Olive;">)</span><br />
						&nbsp;&nbsp;Chat<span style="color: #Gray;">:</span>sendSystemMsg<span style="color: Olive;">(</span>paprm<span style="color: #Gray;">.</span>content<span style="color: Olive;">)</span><br />
						<span style="color: Green; font-weight: bold;">end</span><br />
						Event<span style="color: #Gray;">:</span>connect<span style="color: Olive;">(</span><span style="color: #a11;">[[Game.AnyPlayer.EnterGame]]</span><span style="color: #Gray;">,</span> <span style="color: Green; font-weight: bold;">function</span><span style="color: Olive;">(</span>paprm<span style="color: Olive;">)</span><br />
						&nbsp;&nbsp;uiView<span style="color: #Gray;">:</span>open<span style="color: Olive;">(</span><span style="color: Olive;">)</span> <span style="color: #a50; font-style: italic;">-- 等价于 uiView:open(paprm.eventobjid)</span><br />
						<span style="color: Green; font-weight: bold;">end</span><span style="color: Olive;">)</span>
					</div><br />
				</div>
				<p>
					任意玩家进入游戏时，玩家会打开 uiname 为 [[7134104777896252342]] 的 UI 界面。<br />
					玩家按下 elementid 为 [[7134104777896252342_1]] 按钮 button 时， elementid 为 [[7134104777896252342_2]] 的输入框 inputBox 内容会清空。<br />
					玩家的焦点离开 inputBox （输入完毕）时，如果输入内容为 "hide" ，隐藏 button ，否则显示 button 。在聊天框输出 inputBox 输入的信息。
				</p>
			</div>
			</div>
			<script>writePreviousNextLinks("prev", "event.html", "miniExtend Event")</script>
		</div>
		</div>
	</div>
	</div>
</body>
</html>
