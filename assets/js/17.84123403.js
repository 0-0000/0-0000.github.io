(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{289:function(t,s,a){"use strict";a.r(s);var v=a(14),_=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"miniextend-环境搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#miniextend-环境搭建"}},[t._v("#")]),t._v(" miniExtend 环境搭建")]),t._v(" "),s("h2",{attrs:{id:"全局作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局作用域"}},[t._v("#")]),t._v(" 全局作用域")]),t._v(" "),s("p",[t._v("关于作用域，参见"),s("RouterLink",{attrs:{to:"/guide/document.html#namespace"}},[t._v("定义")]),t._v("。")],1),t._v(" "),s("p",[t._v("在全局作用域下，按"),s("span",{attrs:{title:"源代码开头显示了它们依赖的脚本"}},[t._v("一定顺序")]),t._v("加入这些脚本。")]),t._v(" "),s("p",[t._v("脚本对应源文件 = "),s("code",[t._v("<脚本名>")]),t._v(" + "),s("code",[t._v(".lua")]),t._v(" ，例如 "),s("code",[t._v("core")]),t._v(" 脚本对应 "),s("code",[t._v("core.lua")]),t._v("。")]),t._v(" "),s("p",[t._v("以下是一个合法的顺序，你可以按照该顺序来创建脚本：")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("core")])]),t._v(" "),s("li",[s("code",[t._v("time")])]),t._v(" "),s("li",[s("code",[t._v("console")])]),t._v(" "),s("li",[s("code",[t._v("object")])]),t._v(" "),s("li",[s("code",[t._v("event")])]),t._v(" "),s("li",[s("code",[t._v("ui")])])]),t._v(" "),s("p",[t._v("直接将源代码复制到脚本中即可，也可以使用加载文件按钮"),s("img",{staticStyle:{},attrs:{src:""}}),t._v("来加载源代码。")]),t._v(" "),s("p",[t._v("完成后界面应如图所示（main 脚本组管理自己的脚本）：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/static/global-scripts.png",alt:""}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("脚本、脚本组的命名不影响 miniExtend 正常运行，但良好的命名习惯有利于错误排查。")]),t._v(" "),s("p",[t._v("如果没有做好命名，错误发生时会看到满屏的"),s("code",[t._v("[脚本]")]),t._v("。")])]),t._v(" "),s("h2",{attrs:{id:"ui-环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ui-环境"}},[t._v("#")]),t._v(" UI 环境")]),t._v(" "),s("p",[t._v("对于"),s("strong",[t._v("所有")]),t._v("UI 作用域，创建 "),s("code",[t._v("ui_main")]),t._v(" 脚本（对应源文件为 "),s("code",[t._v("ui_main.lua")]),t._v("）。")]),t._v(" "),s("p",[t._v("然后"),s("strong",[t._v("将 "),s("code",[t._v("uiid")]),t._v(" 替换为所属 UI 界面 ID")]),t._v("。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("UI 界面创建时，对应作用域下会自动创建一个"),s("span",{attrs:{title:"该触发器会使得玩家自动打开该 UI 界面"}},[t._v("触发器")]),t._v("，你应该"),s("strong",[t._v("将其删除")]),t._v("。")])]),t._v(" "),s("p",[t._v("UI 作用域下的脚本初始化后结果："),s("img",{attrs:{src:"/static/ui-scripts.png",alt:""}})]),t._v(" "),s("p",[t._v("UI_main 脚本示例："),s("img",{attrs:{src:"/static/ui-env-script.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"创建自己的脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建自己的脚本"}},[t._v("#")]),t._v(" 创建自己的脚本")]),t._v(" "),s("p",[t._v("做完以上操作，你已经成功搭建了 miniExtend 环境，现在可以新建脚本使用 miniExtend 功能了。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("使用 miniExtend 的脚本"),s("strong",[t._v("必须位于全局作用域下")]),t._v("，且"),s("strong",[t._v("位置必须在 miniExtend 脚本之后")]),t._v("，否则无法正常使用 miniExtend 。")])]),t._v(" "),s("p",[t._v("创建自己的脚本：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/static/my-script.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"更高效的开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更高效的开发"}},[t._v("#")]),t._v(" 更高效的开发")]),t._v(" "),s("p",[t._v("该步骤是可选的。")]),t._v(" "),s("p",[t._v("你可以在代码中插入 "),s("code",[t._v("ide.lua")]),t._v(" 中的内容，里面包含了 miniExtend 关键字，这允许你的编辑器自动补全它们。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/static/ide.png",alt:"在脚本中插入 ide.lua"}})]),t._v(" "),s("h2",{attrs:{id:"hello-world"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hello-world"}},[t._v("#")]),t._v(" Hello, World!")]),t._v(" "),s("p",[t._v("接下来我们使用 miniExtend 监听“玩家动作改变”事件，事件发生时在日志以 "),s("code",[t._v("tag")]),t._v(" 为标签输出 "),s("code",[t._v("Hello World!")]),t._v(" 。")]),t._v(" "),s("div",{staticClass:"language-lua extra-class"},[s("pre",{pre:!0,attrs:{class:"language-lua"}},[s("code",[t._v("Event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("[[Player.PlayAction]]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("paprm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  Console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("logtag")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tag"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, world!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=_.exports}}]);