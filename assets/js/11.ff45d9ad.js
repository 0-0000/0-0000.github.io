(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{285:function(t,e,s){"use strict";s.r(e);var v=s(14),_=Object(v.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"miniextend-object"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#miniextend-object"}},[t._v("#")]),t._v(" miniExtend Object")]),t._v(" "),e("p",[t._v("对应源文件： "),e("code",[t._v("time.lua")]),t._v(" 。")]),t._v(" "),e("p",[t._v("在阅读 "),e("RouterLink",{attrs:{to:"/api/event.html"}},[t._v("miniExtend Event")]),t._v(" 和 "),e("RouterLink",{attrs:{to:"/api/ui.html"}},[t._v("miniExtend CustomUI")]),t._v(" 前， 可能很难理解这部分的强大功能。这是很正常的。")],1),t._v(" "),e("p",[t._v("目前 miniExtend Object 内容较少，且主要以理解为主。")]),t._v(" "),e("p",[t._v("Object 的核心是 "),e("code",[t._v('_G2["__OBJID"]')]),t._v(" ，以下简称 "),e("code",[t._v("objid")]),t._v(" 。")]),t._v(" "),e("p",[t._v("在调用 miniExtend 的一些函数时， "),e("code",[t._v("objid")]),t._v(" 会作为游戏对象默认参数（参数名形如 "),e("code",[t._v("...id")]),t._v(" ，如 "),e("code",[t._v("playerid")]),t._v("）。")]),t._v(" "),e("h2",{attrs:{id:"函数介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#函数介绍"}},[t._v("#")]),t._v(" 函数介绍")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("miniExtend 没有 "),e("code",[t._v("Object")]),t._v(" 作用域，以下函数都是"),e("strong",[t._v("全局函数")]),t._v("。")])]),t._v(" "),e("h3",{attrs:{id:"getobjectid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getobjectid"}},[t._v("#")]),t._v(" "),e("code",[t._v("getObjectId")])]),t._v(" "),e("p",[t._v("参数：无。")]),t._v(" "),e("p",[t._v("返回 "),e("code",[t._v("objid")]),t._v(" 的值。")]),t._v(" "),e("p",[t._v("为了更好的兼容性，你应该使用 "),e("code",[t._v("getObjidId()")]),t._v(" 函数获取 "),e("code",[t._v("objid")]),t._v(" 的值，而不是直接从 "),e("code",[t._v("_G2")]),t._v(" 中取。")]),t._v(" "),e("h3",{attrs:{id:"setobjectid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setobjectid"}},[t._v("#")]),t._v(" "),e("code",[t._v("setObjectId")])]),t._v(" "),e("p",[t._v("设置 "),e("code",[t._v('_G2["__OBJID"]')]),t._v(" 的值。")]),t._v(" "),e("p",[t._v("参数：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("objid")]),t._v(" ：需要设置 "),e("code",[t._v('_G2["__OBJID"]')]),t._v(" 的新值。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("由于命名冲突，这里 "),e("code",[t._v("objid")]),t._v(" 表示 "),e("code",[t._v("objid")]),t._v(" 参数。")])]),t._v(" "),e("p",[t._v("如果 "),e("code",[t._v("objid")]),t._v(" 是一个数字，直接设置 "),e("code",[t._v('_G2["__OBJID"]')]),t._v(" 为 "),e("code",[t._v("objid")]),t._v(" ，不会检查 "),e("code",[t._v("objid")]),t._v(" 是否合法。")]),t._v(" "),e("p",[t._v("如果 "),e("code",[t._v("objid")]),t._v(" 是一个表，且 "),e("code",[t._v("eventobjid")]),t._v(" 键对应的值为 "),e("code",[t._v("number")]),t._v(" 类型，设置 "),e("code",[t._v('_G2["__OBJID"]')]),t._v(" 为 "),e("code",[t._v('objid["eventobjid"]')]),t._v(" 。这在事件的回调中非常有用，只需传递回调函数的表参数，就能自动索引 "),e("code",[t._v("eventobjid")]),t._v(" 键。")]),t._v(" "),e("h2",{attrs:{id:"示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),e("p",[t._v("对于"),e("RouterLink",{attrs:{to:"/api/ui.html#UIView-show"}},[e("code",[t._v("CustomUI.UIView.show([playerid])")])]),t._v(" ，你可以不传递 "),e("code",[t._v("playerid")]),t._v(" 参数调用该函数，这时 "),e("code",[t._v("objid")]),t._v(" 将代替 "),e("code",[t._v("playerid")]),t._v(" 参数。")],1),t._v(" "),e("p",[t._v("以下代码假设你已经搭建好 miniExtend UI 环境了。")]),t._v(" "),e("p",[t._v("示例功能：当任意玩家进入游戏时，玩家会打开 "),e("code",[t._v("uiview")]),t._v(" 界面。")]),t._v(" "),e("div",{staticClass:"language-lua extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-lua"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 需替换为 UI 界面 id")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("local")]),t._v(" uiid "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("[[]]")]),t._v("\n\nuiview "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CustomUI"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("newUIView")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uiid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 任意玩家进入游戏事件")]),t._v("\nEvent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("[[Game.AnyPlayer.EnterGame]]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 注意：objid 已被隐式地设置为 param.eventobjid")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 等价于调用 uiview:show(getObjectId())")]),t._v("\n\tuiview"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uiid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=_.exports}}]);