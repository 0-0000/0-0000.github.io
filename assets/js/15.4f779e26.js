(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{286:function(_,v,t){"use strict";t.r(v);var e=t(14),a=Object(e.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"miniextend-core"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#miniextend-core"}},[_._v("#")]),_._v(" miniExtend Core")]),_._v(" "),v("p",[_._v("对应源文件： "),v("code",[_._v("core.lua")]),_._v(" 。")]),_._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[_._v("TIP")]),_._v(" "),v("p",[_._v("如果你对高级功能没有兴趣，请跳过本页。")])]),_._v(" "),v("p",[_._v("miniExtend 已尽可能恢复标准 Lua 环境，这意味着你能正常调用那些被删除的基本函数。\n以下是有相对标准 Lua 环境有所不同的部分：")]),_._v(" "),v("h2",{attrs:{id:"loadstring2-函数"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#loadstring2-函数"}},[_._v("#")]),_._v(" "),v("code",[_._v("loadstring2")]),_._v(" 函数")]),_._v(" "),v("p",[_._v("简而言之，当解析的代码只进行一些简单的计算，不需要 API 和交换数据的话，使用 "),v("code",[_._v("loadstring()")]),_._v(" ，否则使用 "),v("code",[_._v("loadstring2()")]),_._v(" 。")]),_._v(" "),v("p",[_._v("该函数等价于 "),v("code",[_._v("LoadLuaScript(string, [, chuckname])")]),_._v(" 函数。")]),_._v(" "),v("details",{staticClass:"custom-block details"},[v("summary",[_._v("查看本函数与 `loadstring()` 的差异")]),_._v(" "),v("p",[_._v("该函数效果类似于 Lua5.1 中 "),v("code",[_._v("loadstring(string, [, chuckname]")]),_._v(" 。")]),_._v(" "),v("p",[_._v("但是 "),v("code",[_._v("loadstring()")]),_._v(" 运行时的 "),v("code",[_._v("_G")]),_._v(" 完全是标准的 Lua5.1 的 "),v("code",[_._v("_G")]),_._v(" ，它"),v("strong",[_._v("不能访问迷你世界 API ，当前脚本下的全局变量，包括 miniExtend")]),_._v("。")]),_._v(" "),v("p",[_._v("而 "),v("code",[_._v("loadstring2()")]),_._v(" 运行时的 "),v("code",[_._v("_G")]),_._v(" 等于你的脚本中的 "),v("code",[_._v("_G")]),_._v(" 。")])]),_._v(" "),v("h2",{attrs:{id:"g2-表"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#g2-表"}},[_._v("#")]),_._v(" "),v("code",[_._v("_G2")]),_._v(" 表")]),_._v(" "),v("p",[_._v("只要一个脚本在 miniExtend 的 "),v("code",[_._v("core")]),_._v(" 脚本后运行，都能直接访问该表，因此可以通过 "),v("code",[_._v("_G2")]),_._v(" 来在各个脚本之间交换数据。")]),_._v(" "),v("p",[v("strong",[_._v("不要使用 "),v("code",[_._v('"__" + 大写字母组合')]),_._v(" 来作为自己的索引")]),_._v("，因为 miniExtend 使用这种标识符作为索引存储一些变量。你可以遍历 "),v("code",[_._v("_G2")]),_._v(" 来确定 miniExtend 使用了哪些标识符。")]),_._v(" "),v("p",[v("code",[_._v("loadstring()")]),_._v(" 返回的函数执行时不能使用 "),v("code",[_._v("_G2")]),_._v(" 。")]),_._v(" "),v("h2",{attrs:{id:"注意事项"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[_._v("#")]),_._v(" 注意事项")]),_._v(" "),v("p",[_._v("由于迷你世界不是简单的 Lua 解释器，有些函数会在服务端运行。因此，一些 Lua 基本功能可能存在歧义。")]),_._v(" "),v("p",[_._v("对于任何可以访问到系统的函数（如 "),v("code",[_._v("io")]),_._v(" 、 "),v("code",[_._v("package")]),_._v(" 、 "),v("code",[_._v("os.execute")]),_._v(" ），行为取决于游戏的服务器，具有不可移植性。")]),_._v(" "),v("ul",[v("li",[_._v("在单人模式下，服务器就是玩家的设备。")]),_._v(" "),v("li",[_._v("由房主开启的多人游戏，服务器是房主的设备。")]),_._v(" "),v("li",[_._v("开发者申请的云服，服务器是迷你世界管理该云服的服务器（暂未考证）。")])]),_._v(" "),v("p",[_._v("这些函数只会在服务器上运行，访问的操作系统方法也取决于服务器。")]),_._v(" "),v("div",{staticClass:"custom-block danger"},[v("p",{staticClass:"custom-block-title"},[_._v("某些函数非常危险")]),_._v(" "),v("p",[_._v("以下是一些例子：")]),_._v(" "),v("ul",[v("li",[_._v("如果你使用 "),v("code",[_._v("io.close()")]),_._v(" ，默认输出会关闭。在迷你世界中，这将导致"),v("span",{attrs:{title:"这似乎会使游戏保存，再次打开地图仍是玩法模式，然后继续关闭……所以请使用编辑模式打开"}},[_._v("程序突然退出")]),_._v("。")]),_._v(" "),v("li",[_._v("执行 "),v("code",[_._v('os.execute("cmd")')]),_._v(" ，会弹出一个命令行窗口，并阻塞程序运行。")])])])])}),[],!1,null,null,null);v.default=a.exports}}]);