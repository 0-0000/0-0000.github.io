(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{281:function(e,t,v){"use strict";v.r(t);var _=v(14),n=Object(_.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"miniextend-event"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#miniextend-event"}},[e._v("#")]),e._v(" miniExtend Event")]),e._v(" "),t("p",[e._v("对应源文件： "),t("code",[e._v("event.lua")]),e._v(" 。")]),e._v(" "),t("p",[e._v("本文件更好地实现了 "),t("code",[e._v("ScriptSupportEvent")]),e._v(" ，且支持 "),t("a",{attrs:{href:"/api/object"}},[e._v("miniExtend Object")]),e._v(" 。")]),e._v(" "),t("h2",{attrs:{id:"函数介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#函数介绍"}},[e._v("#")]),e._v(" 函数介绍")]),e._v(" "),t("h3",{attrs:{id:"connect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#connect"}},[e._v("#")]),e._v(" "),t("code",[e._v("connect")])]),e._v(" "),t("p",[e._v("该函数是 miniExtend Event 的核心，用于监听游戏事件，在事件发生时回调函数。")]),e._v(" "),t("p",[e._v("该函数调用了 "),t("code",[e._v("ScriptSupportEvent:registerEvent(msgStr, func)")]),e._v(" 。")]),e._v(" "),t("p",[e._v("函数原型：")]),e._v(" "),t("div",{staticClass:"language-lua extra-class"},[t("pre",{pre:!0,attrs:{class:"language-lua"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" Event"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("eventname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" callback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" uiid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("end")]),e._v("\n")])])]),t("p",[e._v("参数：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("eventname")]),e._v(" ：监听的事件名。\n该参数应是"),t("a",{attrs:{href:"#%E4%BA%8B%E4%BB%B6%E5%88%97%E8%A1%A8"}},[e._v("支持的事件")]),e._v("， miniExtend 自定义的事件名如下：")]),e._v(" "),t("li",[t("code",[e._v("callback")]),e._v(" ：事件触发后调用的函数。\n该参数是 "),t("code",[e._v("function")]),e._v(" 类型，指定要回调的函数。\n该参数不会被检查，且只会在事件发生时才会使用。")]),e._v(" "),t("li",[t("code",[e._v("uiid")]),e._v(" ：要监听的 UI 界面 id ，非 UI 事件则不传。\n对于 UI 事件，会检查参数类型是否为 "),t("code",[e._v("string")]),e._v("。\n对于 UI 事件，只能监听 "),t("code",[e._v("uiid")]),e._v(" 所指 UI 界面发生的事件，其它 UI 界面发生的事件会被丢弃。如果要监听多个 UI 界面事件，请对"),t("strong",[e._v("每个")]),e._v(" UI 界面执行该函数。")])]),e._v(" "),t("p",[e._v("回调函数调用时，还传递一个 "),t("code",[e._v("table")]),e._v(" 作为参数（以下简称 "),t("code",[e._v("param")]),e._v(" ），包含事件相关信息。")]),e._v(" "),t("p",[t("code",[e._v("param")]),e._v(" 包含 "),t("code",[e._v("ScriptSupportEvent:registerEvent")]),e._v(" 传递的参数。除此之外，还包含一个 "),t("code",[e._v("listener")]),e._v(" ，表示监听该事件的 "),t("code",[e._v("Event.Listener")]),e._v(" 对象。")]),e._v(" "),t("p",[e._v("调用回调函数前，miniExtend 会隐式设置 "),t("code",[e._v("objid")]),e._v(" 的值为 "),t("code",[e._v('paprm["eventobjd"]')]),e._v(" 。根据 "),t("code",[e._v("setObjectId()")]),e._v(" 函数的行为，如果不包含那个键，那么 "),t("code",[e._v("objid")]),e._v(" 的值不会被设置。")]),e._v(" "),t("h2",{attrs:{id:"类介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#类介绍"}},[e._v("#")]),e._v(" 类介绍")]),e._v(" "),t("h3",{attrs:{id:"event-listener"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#event-listener"}},[e._v("#")]),e._v(" "),t("code",[e._v("Event.Listener")])]),e._v(" "),t("p",[e._v("又名“事件监听器”。")]),e._v(" "),t("p",[e._v("本类用于管理事件监听，每次调用 "),t("code",[e._v("Event:connect")]),e._v(" 会创建并返回一个监听器。监听器包含了该监听的一些信息，并提供了取消监听的方法。")]),e._v(" "),t("p",[e._v("成员变量：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("callBack")]),e._v(" ： "),t("code",[e._v("function")]),e._v(" 类型，事件发生时要回调的函数。本属性可修改，并会实时应用。")]),e._v(" "),t("li",[t("code",[e._v("id")]),e._v(" : "),t("code",[e._v("number")]),e._v(" 类型，事件 ID 。")]),e._v(" "),t("li",[t("code",[e._v("eventName")]),e._v(" : "),t("code",[e._v("string")]),e._v(" 类型，调用 "),t("code",[e._v("Event:connect")]),e._v(" 函数时传递的 "),t("code",[e._v("eventname")]),e._v(" 参数。")]),e._v(" "),t("li",[t("code",[e._v("msgStr")]),e._v(" ： "),t("code",[e._v("string")]),e._v(" 类型，事件在迷你世界 API 中的名称。除非使用 miniExtend 自定义事件，否则本属性为 "),t("code",[e._v("eventName")]),e._v(" 。")])]),e._v(" "),t("p",[e._v("成员函数：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("delete")]),e._v(" ：取消对应的监听。\n该函数只取消监听，不会删除对象本身。如果需要，请让 "),t("a",{attrs:{href:"https://www.runoob.com/lua/lua-garbage-collection.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lua 垃圾回收器"),t("OutboundLink")],1),e._v("处理。")])]),e._v(" "),t("h2",{attrs:{id:"事件列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事件列表"}},[e._v("#")]),e._v(" 事件列表")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://dev-wiki.mini1.cn/cyclopdeia?wikiMenuId=3&wikiId=1353",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方开放的事件"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("li",[t("code",[e._v("ui.show")]),e._v(" ：等价于 "),t("code",[e._v("UI.Show")]),e._v(" ， UI 界面显示。")]),e._v(" "),t("li",[t("code",[e._v("ui.hide")]),e._v(" ：等价于 "),t("code",[e._v("UI.Hide")]),e._v(" ， UI 界面隐藏。")]),e._v(" "),t("li",[t("code",[e._v("ui.onPress")]),e._v(" ：等价于 "),t("code",[e._v("UI.Button.TouchBegin")]),e._v(" ，按钮被按下，注意该事件不是持续性事件。")]),e._v(" "),t("li",[t("code",[e._v("ui.onClick")]),e._v(" ：等价于 "),t("code",[e._v("UI.Button.Click")]),e._v(" ，按钮被点击。")]),e._v(" "),t("li",[t("code",[e._v("ui.onInput")]),e._v(" ：等价于 "),t("code",[e._v("UI.LostFocus")]),e._v(" ，输入框输入完成。")])])])}),[],!1,null,null,null);t.default=n.exports}}]);